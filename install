#!/usr/bin/env bash

DOTFILES="$HOME/dotfiles"

files="alacritty.yml \
  zshrc \
  zshenv \
  zlogin \
  bashrc \
  tmux.conf \
  vim \
  vimrc \
  init.vim \
  gitconfig \
  cvsignore \
  psqlrc \
  irbrc \
  gemrc"

echo "Symlinking:"

for file in $files; do
  ln -s "${DOTFILES}/$file" "${DOTFILES}/.$file"
  echo "  * $file"
done

echo "Use ctrl-w and ctrl-u everywhere on macOS"

mkdir "$HOME/Library/KeyBindings" && cp "$DOTFILES/macos_DefaultKeyBinding.dict" "$HOME/Library/KeyBindings/DefaultKeyBinding.dict"

echo "NVIM c-h thinger"
infocmp $TERM | sed 's/kbs=^[hH]/kbs=\\177/' > $TERM.ti
tic $TERM.ti

if which brew > /dev/null && [ -f "$DOTFILES/Brewfile" ]; then
  brew bundle
else
  cat <<MSG
Homebrew is not installed.  Install then run:

  $ brew bundle

MSG
fi
