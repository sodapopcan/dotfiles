###
# Setup {{{1
#
# Start with a clean slate
clear_all_shortcuts yes

# Use super as kitty modifier, which is cmd on macos.
kitty_mod super

# Remote control
allow_remote_control yes
listen_on unix:/tmp/mykitty

# Config
map super+shift+r load_config_file

# Shell
shell_integration no-cursor

# Terminal
enable_audio_bell no
map kitty_mod+shift+s launch --allow-remote-control kitty +kitten broadcast --match-tab state:focused --end-session esc

# Fonts {{{1
#
font_family      BlexMono Nerd Font
bold_font        auto
italic_font      auto
bold_italic_font auto

font_size 12.0

symbol_map U+E0A0-U+E0A3,U+E0C0-U+E0C7 Menlo
symbol_map U+E000-U+E00D Menlo
symbol_map U+e0a0-U+e0a2,U+e0b0-U+e0b3 Menlo
symbol_map U+e0a3-U+e0a3,U+e0b4-U+e0c8,U+e0cc-U+e0d2,U+e0d4-U+e0d4 Menlo
symbol_map U+e5fa-U+e62b Menlo
symbol_map U+e700-U+e7c5 Menlo
symbol_map U+f000-U+f2e0 Menlo
symbol_map U+e200-U+e2a9 Menlo
symbol_map U+f400-U+f4a8,U+2665-U+2665,U+26A1-U+26A1,U+f27c-U+f27c Menlo
symbol_map U+F300-U+F313 Menlo
symbol_map U+23fb-U+23fe,U+2b58-U+2b58 Menlo
symbol_map U+f500-U+fd46 Menlo
symbol_map U+e300-U+e3eb Menlo
symbol_map U+21B5,U+25B8,U+2605,U+2630,U+2632,U+2714,U+E0A3,U+E615,U+E62B Menlo
symbol_map U+2758-U+275A,U+2581-U+2595 Courier

modify_font underline_position 2px
modify_font underline_thickness 50%

# Cursor {{{1
#
cursor_shape block
cursor_blink_interval 0

# Clipboard {{{1
#
map kitty_mod+c copy_to_clipboard
map kitty_mod+v paste_from_clipboard

copy_on_select 🍎
map kitty_mod+p paste_from_buffer 🍎

# Layouts {{{1
#
enabled_layouts splits,stack
map kitty_mod+z combine -> toggle_layout stack -> scroll_prompt_to_bottom

# Scrollback/scrolling/jumping {{{1
#
#
scrollback_pager vim -u NONE -
  \ -c 'w! /tmp/kitty_scrollback' 
  \ -c 'term ++curwin cat /tmp/kitty_scrollback'
  \ -c "set clipboard=unnamed"
  \ -c "nnoremap q ZQ" -c "hi Normal ctermbg=235"
# map kitty_mod+i show_scrollback
map kitty_mod+i  kitten kitty_grab/grab.py

map super+ctrl+e combine > scroll_line_down > scroll_line_down
map super+ctrl+y combine > scroll_line_up > scroll_line_up

# Scroll to last prompt
map kitty_mod+p scroll_to_prompt -1
# Scroll to next prompt
map kitty_mod+n scroll_to_prompt 1

# Navigation type stuff {{{1
#
map kitty_mod+1 new_tab_with_cwd
map kitty_mod+3 kitten new_tab_3.py
map kitty_mod+shift+w close_tab
confirm_os_window_close 1
map kitty_mod+shift+ctrl+q quit

map kitty_mod+shift+x close_window

# map kitty_mod+shift+n new_os_window
map kitty_mod+shift+n kitten new_os_window.py

map kitty_mod+shift+alt+] next_tab
map kitty_mod+shift+alt+[ previous_tab

map kitty_mod+shift+] combine : send_key g : send_key t
map kitty_mod+shift+[ combine : send_key g : send_key shift+t

map kitty_mod+alt+shift+. move_tab_forward
map kitty_mod+alt+shift+, move_tab_backward

map kitty_mod+ctrl+h move_window left
map kitty_mod+ctrl+j move_window bottom
map kitty_mod+ctrl+k move_window top
map kitty_mod+ctrl+l move_window right

ap kitty_mod+; goto_tab -1
map kitty_mod+a goto_tab 1
map kitty_mod+s goto_tab 2
map kitty_mod+d goto_tab 3
map kitty_mod+f goto_tab 4
map kitty_mod+q goto_tab 5
map kitty_mod+w goto_tab 6
map kitty_mod+e goto_tab 7
map kitty_mod+r goto_tab 8

map kitty_mod+j kitten pass_keys.py bottom ctrl+j
map kitty_mod+k kitten pass_keys.py top    ctrl+k
map kitty_mod+h kitten pass_keys.py left   ctrl+h
map kitty_mod+l kitten pass_keys.py right  ctrl+l

map kitty_mod+shift+h kitten relative_resize.py left
map kitty_mod+shift+j kitten relative_resize.py down
map kitty_mod+shift+k kitten relative_resize.py up
map kitty_mod+shift+l kitten relative_resize.py right

map kitty_mod+shift+\ launch --location=vsplit --cwd=current
map kitty_mod+shift+- launch --location=hsplit --cwd=current

window_border_width 1
draw_minimal_borders yes
window_margin_width 0
placement_strategy top-left
active_border_color #2a2a2a
inactive_border_color #2a2a2a
inactive_text_alpha 0.3
map kitty_mod+ctrl+a inactive_text_alpha 1.0
hide_window_decorations yes

# Tab bar {{{1
#
tab_bar_style separator
tab_separator ""
tab_bar_min_tabs 1
tab_title_template "{' -' if layout_name == 'stack' else '  '}{fmt.fg.red}{bell_symbol}{activity_symbol}{fmt.fg.tab}{title}  "
map kitty_mod+, set_tab_title

active_tab_foreground   #000
active_tab_background   #777
active_tab_font_style   normal
inactive_tab_foreground #111
inactive_tab_background #444
inactive_tab_font_style normal

tab_bar_background #444

# Colour Scheme {{{1
#
foreground #ddd
background #303030

# Elixir
map kitty_mod+shift+b send_text normal #iex:break\n

# Startup {{{1
#
startup_session ~/.config/kitty/startup.conf
